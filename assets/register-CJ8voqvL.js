import{a1 as C,al as q,am as M,S as P,U as R,a4 as t,L as l,_ as f,Y as b,a5 as e,aR as T,az as n,an as E,a6 as U,ar as _}from"./index-O_OIJZ_k.js";import{c as B,a as i,f as F,u as N,e as m,V as I}from"./index.esm-BYzkOkrp.js";import{v as w}from"./index-BePcaPFC.js";import{V as h,a as L,b as S}from"./route-block-XNcMZbMm.js";import{V as D}from"./VDivider-CsSZj-Rn.js";import{V as z}from"./VContainer-BCZ9p7b9.js";const O={class:"text-center"},Y={class:"text-center"},j={__name:"register",setup(G){const{t:s}=C(),{api:x}=_(),v=q(),$=M(),y=B({account:i().required(s("api.userAccountRequired")).min(4,s("api.userAccountTooShort")).max(20,s("api.userAccountTooLong")).test("isAlphanumeric",s("api.userAccountInvalid"),a=>w.isAlphanumeric(a)),email:i().required(s("api.userEmailRequired")).test("isEmail",s("api.userEmailInvalid"),a=>w.isEmail(a)),password:i().required(s("api.userPasswordRequired")).min(4,s("api.userPasswordTooShort")).max(20,s("api.userPasswordTooLong")),passwordConfirm:i().oneOf([F("password")],s("api.userPasswordNotMatch"))}),{handleSubmit:k,isSubmitting:V}=N({validationSchema:y}),d=m("account"),c=m("email"),p=m("password"),g=m("passwordConfirm"),A=k(async a=>{var r,o;try{await x.post("/user",{account:a.account,email:a.email,password:a.password}),v({text:s("register.success"),snackbarProps:{color:"green"}}),$.push("/login")}catch(u){console.log(u),v({text:s("api."+(((o=(r=u==null?void 0:u.response)==null?void 0:r.data)==null?void 0:o.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(a,r)=>(P(),R(z,null,{default:t(()=>[l(L,null,{default:t(()=>[l(h,{cols:"12"},{default:t(()=>[f("h1",O,b(a.$t("nav.register")),1)]),_:1}),l(D),l(h,{cols:"12"},{default:t(()=>[l(I,{disabled:e(V),onSubmit:T(e(A),["prevent"])},{default:t(()=>[l(n,{modelValue:e(d).value.value,"onUpdate:modelValue":r[0]||(r[0]=o=>e(d).value.value=o),"error-messages":e(d).errorMessage.value,label:a.$t("user.account"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),l(n,{modelValue:e(c).value.value,"onUpdate:modelValue":r[1]||(r[1]=o=>e(c).value.value=o),"error-messages":e(c).errorMessage.value,label:a.$t("user.email")},null,8,["modelValue","error-messages","label"]),l(n,{modelValue:e(p).value.value,"onUpdate:modelValue":r[2]||(r[2]=o=>e(p).value.value=o),type:"password","error-messages":e(p).errorMessage.value,label:a.$t("user.password"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),l(n,{modelValue:e(g).value.value,"onUpdate:modelValue":r[3]||(r[3]=o=>e(g).value.value=o),type:"password","error-messages":e(g).errorMessage.value,label:a.$t("user.passwordConfirm"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),f("div",Y,[l(E,{loading:e(V),type:"submit",color:"primary"},{default:t(()=>[U(b(a.$t("register.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof S=="function"&&S(j);export{j as default};
